# Настройка интеграции с оборудованием

Все необходимые настройки для работы с оборудованием заполняются  в обработке **"Интеграция с оборудование"** расположенной подсистеме **"Честный знак" - "Сервис"**.

[![2021-08-16_19-28-37][2021-08-16_19-28-37]][2021-08-16_19-28-37]

В настройках необходимо указать **категорию документов gps**

[![2021-08-16_19-31-01][2021-08-16_19-31-01]][2021-08-16_19-31-01]

Заполнить РС **"ГУИДы организаций для оборудования"**:

- Организация
- ГУИД Отправителя (ГУИД Константы в системе поставщика оборудования)
- ГУИД Получателя (ГУИД Предприятия в системе поставщика оборудования)

[![2021-08-26_21-13-48][2021-08-26_21-13-48]][2021-08-26_21-13-48]

Заполнить РС **"Места хранения файлов для работы с оборудованием"**

Места хранения файлов заполняются в разрезе Организаций и Линий (рабочих центров). Папки с файлами должны быть доступны с сервера.  
Для каждого РЦ указывается:

- **Уровень агрегации линии** ():
  - При выборе уровня **0** - Обрабатывается файл **LVL0** и при загрузке создается документ **Переработка** с кодами **DataMatrix** в штрихкодах;
  - При выборе уровня **1** - Обрабатывается файл **LVL1** и создаются **Штрихкоды упаковок** для коробов со вложенными кодами **DataMatrix**. После загрузки код короба попадает в **Переработку**;
  - При выборе уровня **2** - Обрабатываются файлы **LVL1** и **LVL2**, для коробов (из файла первого уровня) и для паллет (из файла второго уровня) создаются **Штрихкоды упаковок** с соответствующей вложенностью. В результате загрузки создается документ **Переработка** с кодами **Паллет**. При выборе **2** уровня агрегации также необходимо выбрать тип тары упаковочного листа (Тип тары является идентификатором, добавляющий уникальность при выполнении параллельных загрузок);
- **Адрес папки выгрузки файлов** (папка куда будут выгружены файлы из 1С)
- **Адрес папки загрузки** (папка от куда 1с будет загружать файлы полученные с оборудования)
- **Адрес папки архива файлов** (папка куда будут перемешены файлы с результатами печати после удачной обработки в 1с)
- **Адрес папки ошибок** (папка куда будут перемещены файлы с результатами печати после обработки в 1с с ошибкой)

[![2021-08-16_19-33-27][2021-08-16_19-33-27]][2021-08-16_19-33-27]

Установить флаг **"Автоматически сохранять файл выгрузки на оборудование"**. При включение данной опции документы будут сохраняться автоматически при выполнении выгрузки в папку в соответствии с РС "Места хранения файлов для работы с оборудованием".

*Определить работу регламентных заданий:*

- Автоматически загружать коды с оборудования. В случае, если регламентное задание включено, то система будет автоматически подгружать результаты маркировки и создавать документы Переработка.
- Автоматически загружать отчеты с оборудования. После того как файл получен с оборудования, в папку загрузки помещается файл об успешном/неуспешном прочтении. При включение данного рег. задания обработка таких файлов происходит автоматически. Результат обработки файлов можно посмотреть в РС **"Статусы заданий на маркировку на оборудовании"**. Ссылка на регистр расположена в пункте *См. также* в обработке **"Интеграция с оборудованием"**

![2021-08-16_20-49-08][2021-08-16_20-49-08]

[2021-08-16_19-28-37]: Hardware_integration_settings.assets/2021-08-16_19-28-37.png
[2021-08-16_19-31-01]: Hardware_integration_settings.assets/2021-08-16_19-31-01.png
[2021-08-16_19-33-27]: Hardware_integration_settings.assets/2021-08-16_19-33-27.png
[2021-08-16_20-49-08]: Hardware_integration_settings.assets/2021-08-16_20-49-08.png
[2021-08-26_21-13-48]: Hardware_integration_settings.assets/2021-08-26_21-13-48.png



